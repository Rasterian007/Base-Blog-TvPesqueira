<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>In√≠cio - TvPesqueira</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&family=Montserrat:wght@800&display=swap" rel="stylesheet">
    
    <style>
        /* --- ESTILOS GERAIS (MANTIDOS CONSISTENTES) --- */
        :root {
            --cor-primaria: #FFD700;
            --cor-secundaria: #051e3e;
            --cor-terciaria: #ffffff;
            --cinza-fundo: #f4f5f7;
            --texto-escuro: #1a1a1a;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Open Sans', sans-serif; background-color: var(--cinza-fundo); color: var(--texto-escuro); line-height: 1.6; }
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        ul { list-style: none; }
        img { width: 100%; height: auto; display: block; }
        
        /* HEADER */
        header { background-color: var(--cor-secundaria); color: var(--cor-terciaria); position: sticky; top: 0; z-index: 1000; border-bottom: 4px solid var(--cor-primaria); }
        .header-main { 
            max-width: 1200px; 
            margin: 0 auto; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 15px 20px; 
            flex-wrap: wrap; 
        }
        .logo { font-family: 'Montserrat', sans-serif; font-size: 2rem; font-weight: 800; text-transform: uppercase; letter-spacing: -1px; display: flex; align-items: center; gap: 5px; }
        .logo span.tv { background: var(--cor-primaria); color: var(--cor-secundaria); padding: 0 10px; border-radius: 4px; }
        .nav-menu { display: flex; gap: 20px; }
        .nav-menu a { font-weight: 600; font-size: 0.9rem; text-transform: uppercase; padding: 5px 0; border-bottom: 2px solid transparent; }
        .nav-menu a:hover { color: var(--cor-primaria); border-bottom: 2px solid var(--cor-primaria); }
        .btn-live { background: #cc0000; color: white; padding: 5px 15px; border-radius: 50px; font-weight: bold; font-size: 0.8rem; display: flex; align-items: center; gap: 5px; }
        .menu-toggle { display: none; cursor: pointer; color: var(--cor-terciaria); font-size: 1.5rem; }

        /* LAYOUT PRINCIPAL */
        .container { max-width: 1200px; margin: 20px auto; padding: 0 20px; }

        .section-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            color: var(--cor-secundaria);
            margin-top: 30px;
            margin-bottom: 20px;
            border-bottom: 4px solid var(--cor-primaria);
            padding-bottom: 10px;
        }

        /* --- DESTAQUE DA NOT√çCIA (FEATURED POST) --- */
        .featured-post-container {
            display: flex;
            background: var(--cor-terciaria);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            overflow: hidden;
        }
        .featured-post-img {
            flex: 1.5; /* Ocupa mais espa√ßo */
            height: 400px;
            overflow: hidden;
        }
        .featured-post-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
        .featured-post-container:hover .featured-post-img img {
            transform: scale(1.03);
        }
        .featured-post-content {
            flex: 1; /* Ocupa menos espa√ßo */
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .featured-post-category {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--cor-secundaria);
            text-transform: uppercase;
            margin-bottom: 10px;
            border-left: 4px solid var(--cor-primaria);
            padding-left: 10px;
        }
        .featured-post-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 2rem;
            line-height: 1.2;
            margin-bottom: 15px;
            color: var(--texto-escuro);
        }
        .featured-post-excerpt {
            font-size: 1rem;
            color: #555;
            margin-bottom: 20px;
            display: -webkit-box;
            -webkit-line-clamp: 3; /* Limita a 3 linhas */
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .featured-post-meta {
            font-size: 0.8rem;
            color: #999;
        }
        .featured-post-default { /* Estilo para quando n√£o houver destaque */
             background: var(--cor-terciaria);
             padding: 40px;
             text-align: center;
             border-radius: 8px;
             box-shadow: 0 4px 12px rgba(0,0,0,0.05);
             margin-bottom: 30px;
        }


        /* --- NOT√çCIAS (NEWS GRID) --- */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4 colunas */
            gap: 20px;
        }
        .post-card { 
            background: var(--cor-terciaria); 
            border-radius: 8px; 
            overflow: hidden; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.1); 
            transition: transform 0.2s; 
        }
        .post-card:hover { transform: translateY(-5px); box-shadow: 0 6px 15px rgba(0,0,0,0.15); }
        .post-card-img { height: 150px; overflow: hidden; }
        .post-card-img img { width: 100%; height: 100%; object-fit: cover; }
        .post-card-content { padding: 15px; }
        .post-card-category { font-size: 0.7rem; font-weight: 700; color: #777; text-transform: uppercase; margin-bottom: 5px; }
        .post-card-title { font-family: 'Montserrat', sans-serif; font-size: 0.95rem; margin-bottom: 8px; color: var(--texto-escuro); height: 40px; overflow: hidden;}
        .post-card-meta { font-size: 0.75rem; color: #999; margin-top: 5px; }

        /* --- PUBLICIDADE --- */
        .ad-container {
            display: grid;
            grid-template-columns: 2fr 1fr; /* V√≠deo maior que a imagem */
            gap: 20px;
            margin-top: 30px;
            margin-bottom: 40px;
        }

        .ad-video, .ad-image {
            background: var(--cor-terciaria);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .ad-video h4, .ad-image h4 {
            font-family: 'Montserrat', sans-serif; 
            font-size: 0.9rem;
            color: #cc0000;
            text-align: center;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .ad-video iframe {
            width: 100%;
            height: 300px;
            border-radius: 6px;
        }

        .ad-image img {
            max-height: 300px;
            object-fit: cover;
            border-radius: 6px;
        }

        /* FOOTER */
        footer { background-color: var(--cor-secundaria); color: var(--cor-terciaria); padding: 30px 0; border-top: 4px solid var(--cor-primaria); }
        .footer-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 30px; }
        .footer-col h4 { font-family: 'Montserrat', sans-serif; font-size: 1.2rem; margin-bottom: 15px; color: var(--cor-primaria); }
        .footer-col a { display: block; margin-bottom: 8px; font-size: 0.9rem; opacity: 0.8; }
        .footer-col a:hover { opacity: 1; color: var(--cor-terciaria); }

        /* RESPONSIVIDADE */
        @media (max-width: 992px) {
            .featured-post-container {
                flex-direction: column;
            }
            .featured-post-img {
                height: 300px;
            }
            .news-grid { 
                grid-template-columns: repeat(2, 1fr); 
            }
            .ad-container {
                grid-template-columns: 1fr;
            }
            .header-main { flex-wrap: wrap; }
            .nav-menu { display: none; flex-direction: column; width: 100%; order: 4; }
            .nav-menu.active { display: flex; }
            .menu-toggle { display: block; order: 3; }
        }
        @media (max-width: 600px) {
            .news-grid { grid-template-columns: 1fr; }
            .footer-content { grid-template-columns: 1fr; }
            .featured-post-title { font-size: 1.5rem; }
            .ad-video iframe { height: 200px; }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-main">
            <a href="index.html" class="logo">
                <span class="tv">TV</span>
                <span class="nome">PESQUEIRA</span>
            </a>
            <div class="menu-toggle" onclick="toggleMenu()">&#9776;</div>
            <nav class="nav-menu" id="navMenu">
                <a href="index.html" class="active">In√≠cio</a>
                <a href="categoria.html?cat=Cidade">Cidade</a>
                <a href="categoria.html?cat=Pol√≠cia">Pol√≠cia</a>
                <a href="categoria.html?cat=Pol√≠tica">Pol√≠tica</a>
                <a href="categoria.html?cat=Esportes">Esportes</a>
                <a href="categoria.html?cat=Economia">Economia</a>
            </nav>
            <a href="https://www.youtube.com/channel/UCpavRcgQQTc4hv4GSXHFS7A" target="_blank" class="btn-live">
                <i class="fas fa-video"></i> AO VIVO
            </a>
        </div>
    </header>

    <main class="container">
        <h2 class="section-title"> Destaque do Dia</h2>
        <section id="featured-post">
            <div class="featured-post-default">
                <p style="font-size: 1.2rem; color: var(--cor-secundaria);">Carregando a not√≠cia principal...</p>
                <p style="margin-top: 10px; font-size: 0.9rem; color: #777;">Se n√£o houver posts publicados, o destaque permanecer√° vazio.</p>
            </div>
        </section>

        <div class="ad-container">
            <div class="ad-video">
                <h4>PUBLICIDADE EM V√çDEO</h4>
                <iframe 
                    width="560" 
                    height="315" 
                    src="https://www.youtube.com/watch?v=YB-fz1SV95Q&t=2s" 
                    title="An√∫ncio em V√≠deo" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
                </iframe>
            </div>
            <div class="ad-image">
                <h4>PUBLICIDADE EM IMAGEM</h4>
                <a href="#" target="_blank">
                    <img src="https://via.placeholder.com/400x300?text=ANUNCIE+AQUI+400x300" alt="Banner Publicit√°rio">
                </a>
            </div>
        </div>

        <h2 class="section-title">‚åõ √öltimas Not√≠cias</h2>
        <section class="news-grid" id="latest-news-grid">
            <p style="grid-column: 1 / -1; text-align: center;">Carregando as not√≠cias mais recentes...</p>
        </section>

    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-col">
                <div class="logo">
                    <span class="tv">TV</span>
                    <span class="nome">PESQUEIRA</span>
                </div>
                <p style="font-size: 0.9rem; opacity: 0.7;">Levando a verdade dos fatos at√© voc√™. Jornalismo independente e comprometido com a regi√£o.</p>
            </div>
            <div class="footer-col">
                <h4>Editorias</h4>
                <a href="categoria.html?cat=Cidade">Cidade</a>
                <a href="categoria.html?cat=Pol√≠cia">Pol√≠cia</a>
                <a href="categoria.html?cat=Pol√≠tica">Pol√≠tica</a>
                <a href="categoria.html?cat=Economia">Economia</a>
                <a href="categoria.html?cat=Cultura">Cultura</a>
            </div>
            <div class="footer-col">
                <h4>Institucional</h4>
                <a href="quem-somos.html">Quem Somos</a>
                <a href="anuncie.html">Anuncie</a>
            </div>
            <div class="footer-col">
                <h4>Redes Sociais</h4>
                <a href="https://www.instagram.com/tvpesqueira" target="_blank">Instagram</a>
                <a href="https://www.facebook.com/tvpesqueira" target="_blank">Facebook</a>
                <a href="https://www.youtube.com/@tvpesqueira" target="_blank">Youtube</a>
                <a href="https://twitter.com/tvpesqueira" target="_blank">Twitter/X</a>
            </div>
        </div>
        <div style="text-align: center; margin-top: 30px; font-size: 0.8rem; opacity: 0.5;">
            &copy; 2023 TvPesqueira. Todos os direitos reservados.
        </div>
    </footer>

    <script>
        // --- FUN√á√ïES COMPARTILHADAS (Extra√≠das dos outros arquivos) ---
        const POSTS_STORAGE_KEY = 'tvpesqueira_posts';
        
        function loadPosts() {
            const postsJson = localStorage.getItem(POSTS_STORAGE_KEY);
            let posts;
            try {
                posts = JSON.parse(postsJson);
            } catch (e) {
                console.error("Erro ao carregar posts do localStorage:", e);
                posts = []; 
            }
            return (Array.isArray(posts) && posts.length > 0) ? posts : [];
        }
        
        function formatDate(dateString) {
            if (!dateString) return 'Data Desconhecida';
            try {
                const date = new Date(dateString);
                if (isNaN(date)) return 'Data Inv√°lida';
                
                const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
                return date.toLocaleDateString('pt-BR', options);
            } catch (e) {
                return 'Erro na Data';
            }
        }
        
        function toggleMenu() {
            var menu = document.getElementById("navMenu");
            menu.classList.toggle("active");
        }
        // --- FIM DAS FUN√á√ïES COMPARTILHADAS ---


        function renderHomePage() {
            // 1. Carrega todos os posts e filtra os publicados
            const allPosts = loadPosts(); 
            const publishedPosts = allPosts
                .filter(p => p.status === 'published')
                .sort((a, b) => new Date(b.date) - new Date(a.date)); // Ordena por mais recente

            // --- 2. DESTAQUE (Featured Post) ---
            const featuredPostElement = document.getElementById('featured-post');
            const featuredPost = publishedPosts.length > 0 ? publishedPosts[0] : null;

            if (featuredPost) {
                // Renderiza o destaque com o primeiro post
                featuredPostElement.innerHTML = `
                    <a href="post.html?id=${featuredPost.id}" class="featured-post-container">
                        <div class="featured-post-img">
                            <img src="${featuredPost.img || 'https://via.placeholder.com/600x400.png?text=Noticia+Destaque'}" alt="${featuredPost.title}" onerror="this.onerror=null; this.src='https://via.placeholder.com/600x400.png?text=Noticia+Destaque'">
                        </div>
                        <div class="featured-post-content">
                            <div class="featured-post-category">${featuredPost.category || 'Geral'}</div>
                            <h2 class="featured-post-title">${featuredPost.title}</h2>
                            <p class="featured-post-excerpt">${featuredPost.description}</p>
                            <p class="featured-post-meta">Por ${featuredPost.author || 'Reda√ß√£o'} - ${formatDate(featuredPost.date)}</p>
                        </div>
                    </a>
                `;
            } else {
                 // Se n√£o houver posts publicados, exibe a mensagem padr√£o
                 featuredPostElement.innerHTML = `
                    <div class="featured-post-default">
                        <p style="font-size: 1.2rem; color: var(--cor-secundaria);">Nenhuma not√≠cia publicada para destaque no momento.</p>
                        <p style="margin-top: 10px; font-size: 0.9rem; color: #777;">Crie um novo post no Dashboard para ver o conte√∫do aqui.</p>
                    </div>
                `;
            }

            // --- 3. √öLTIMAS NOT√çCIAS (Latest News Grid) ---
            const latestNewsGridElement = document.getElementById('latest-news-grid');
            
            // Pega os 4 posts mais recentes (excluindo o destaque, se houver)
            const latestPosts = publishedPosts.slice(featuredPost ? 1 : 0, (featuredPost ? 1 : 0) + 4);

            if (latestPosts.length > 0) {
                const postsHtml = latestPosts.map(post => `
                    <a href="post.html?id=${post.id}" class="post-card">
                        <div class="post-card-img">
                            <img src="${post.img || 'https://via.placeholder.com/300x150.png?text=Sem+Imagem'}" alt="${post.title}" onerror="this.onerror=null; this.src='https://via.placeholder.com/300x150.png?text=Sem+Imagem'">
                        </div>
                        <div class="post-card-content">
                            <div class="post-card-category">${post.category || 'Geral'}</div>
                            <h3 class="post-card-title">${post.title}</h3>
                            <p class="post-card-meta">Por ${post.author || 'Reda√ß√£o'} - ${formatDate(post.date)}</p>
                        </div>
                    </a>
                `).join(''); 
                
                latestNewsGridElement.innerHTML = postsHtml;

            } else if (!featuredPost) {
                // Se n√£o houver NENHUM post, exibe mensagem na grade de √∫ltimas not√≠cias
                latestNewsGridElement.innerHTML = `
                    <div style="grid-column: 1 / -1; padding: 20px; text-align: center; background: #fff; border-radius: 8px;">
                        <p style="font-size: 1.2rem; color: #555;">üòî N√£o h√° nenhuma not√≠cia publicada no sistema.</p>
                        <p style="margin-top: 10px; font-size: 0.9rem;">Verifique o Dashboard para publicar novos posts.</p>
                    </div>
                `;
            } else {
                 // Se houver SOMENTE o destaque, limpa a grade
                 latestNewsGridElement.innerHTML = `
                    <div style="grid-column: 1 / -1; padding: 20px; text-align: center; background: #fff; border-radius: 8px;">
                        <p style="font-size: 1rem; color: #555;">O destaque do dia √© a √∫nica not√≠cia publicada no momento.</p>
                    </div>
                 `;
            }
        }

        // 4. EXECUTA A FUN√á√ÉO AO CARREGAR A P√ÅGINA
        document.addEventListener('DOMContentLoaded', renderHomePage);
    </script>
</body>
</html>

